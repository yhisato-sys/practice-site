// ===================================
// _mixins.scss
// ===================================
@use "sass:math";
@use "sass:color";
@use "variables" as v;
@use "functions" as f;

// -----------------------------------
// 1. メディアクエリ (レスポンシブデザイン)
// -----------------------------------

@mixin breakpoint-sm {
  @media (min-width: v.$breakpoint-sm) {
    @content;
  }
}

@mixin breakpoint-md-down {
  $max-width-md-down: v.$breakpoint-md - 0.02px;
  @media (max-width: $max-width-md-down) {
    @content;
  }
}

@mixin breakpoint-md {
  @media (min-width: v.$breakpoint-md) {
    @content;
  }
}

@mixin breakpoint-lg {
  @media (min-width: v.$breakpoint-lg) {
    @content;
  }
}

@mixin breakpoint-xl {
  @media (min-width: v.$breakpoint-xl) {
    @content;
  }
}

// headerのグローバルナビ切り替えポイント
@mixin breakpoint-header-down {
  $max-width-header-down: v.$breakpoint-header - 0.02px;
  @media (max-width: $max-width-header-down) {
    @content;
  }
}

@mixin breakpoint-header {
  @media (min-width: v.$breakpoint-header) {
    @content;
  }
}

// -----------------------------------
// 2. レイアウトヘルパー
// -----------------------------------

@mixin center-flex {
  display: flex;
  justify-content: center;
  align-items: center;
}

@mixin transition($property: all, $duration: 0.3s, $easing: ease) {
  transition: $property $duration $easing;
}

// -----------------------------------
// 3. section見出しデザイン
// -----------------------------------

@mixin section-heading-design($design-type: 'default') {
  // デフォルト（何も指定しない場合）は装飾なし

  @if $design-type == 'underline-primary' {
    // パターン1: メインカラーの下線
    border-bottom: 2px solid v.$color-primary;
    padding-bottom: f.px-sp(8);

    @media (min-width: v.$breakpoint-md) {
      padding-bottom: f.px-pc(12);
    }
  } @else if $design-type == 'border-left-accent' {
    // パターン2: 左側の太いアクセント線と背景
    display: inline-block; // 背景と線のためにインラインブロック化
    padding: f.px-sp(5) f.px-sp(15);
    background-color: v.$nav-bg-level1;
    border-left: 5px solid v.$color-danger;

    @media (min-width: v.$breakpoint-md) {
      padding: f.px-pc(10) f.px-pc(20);
    }
  } @else if $design-type == 'ribbon-background' {
    // パターン3: リボン風背景（中央配置のため親要素に依存するが、ここでは擬似要素で実現）
    position: relative;
    display: inline-block;
    padding: f.px-sp(10) f.px-sp(30);
    background-color: v.$color-primary;
    color: v.$color-white !important; // テキスト色を白に
    // 三角の擬似要素でリボンの切れ込みを表現 (オプション)
    &::after {
      content: '';
      position: absolute;
      right: 0;
      top: 100%;
      border: 10px solid transparent;
      border-top-color: color.adjust(
        v.$color-primary,
        $lightness: -10%
      ); // 少し暗い色で影
    }
  } @else if $design-type == 'simple-line-box' {
    // パターン4: シンプルな四角い枠線
    border: 1px solid v.$color-gray;
    padding: f.px-sp(10) 0;

    @media (min-width: v.$breakpoint-md) {
      padding: f.px-pc(15) 0;
    }
  } @else if $design-type == 'marker-underline' {
    // パターン5: マーカーペンで引いたような太い線
    position: relative;
    margin-left: auto;
    margin-right: auto;
    display: inline-block;
    z-index: 1;

    &::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      width: 100%;
      height: 35%; /* マーカーの太さ */
      background-color: color.adjust(
        v.$color-primary,
        $lightness: 40%
      ); /* 薄いマーカー色 */
      z-index: -1;
    }
  } @else if $design-type == 'double-line-primary' {
    // パターン6: 二重線
    position: relative;
    padding-bottom: f.px-sp(15);
    border-bottom: 1px solid v.$color-gray-dark;

    &::after {
      content: '';
      position: absolute;
      bottom: f.px-sp(8);
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 3px;
      background-color: v.$color-primary;
    }
  } @else if $design-type == 'speech-bubble' {
    // パターン7: 吹き出し風
    position: relative;
    display: inline-block;
    padding: f.px-sp(12) f.px-sp(25);
    background-color: v.$color-secondary;
    color: v.$color-white !important;
    border-radius: v.$border-radius;

    &::before {
      content: '';
      position: absolute;
      left: 50%;
      bottom: -15px;
      transform: translateX(-50%);
      border: 8px solid transparent;
      border-top-color: v.$color-secondary;
    }
  } @else if $design-type == 'shadow-box' {
    // パターン8: 浮き出る影付きボックス
    display: inline-block;
    padding: f.px-sp(10) f.px-sp(20);
    background-color: v.$color-white;
    box-shadow: 4px 4px 0px v.$color-primary-light;
    border: 1px solid v.$color-primary;
  } @else if $design-type == 'vertical-ribbon' {
    // パターン9: 縦帯リボン
    position: relative;
    padding-left: f.px-sp(30);
    text-align: left !important; // 常に左寄せ

    &::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 10px;
      background-color: v.$color-primary;
    }
  } @else if $design-type == 'icon-left-accent' {
    // パターン10: アイコンと下線
    border-bottom: 2px solid v.$color-gray-light;
    padding-bottom: f.px-sp(10);
    text-align: left !important;
  } @else if $design-type == 'left-right-line' {
    // パターン11: 左右縦中央にライン
    color: v.$color-primary;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1em;
    white-space: nowrap;
    &::before,
    &::after {
      content: '';
      height: 2px;
      width: 100%;
      display: block;
      background-color: color.adjust(
        v.$color-primary,
        $lightness: 25%
      ); // 少し明るい色
    }
  } @else if $design-type == 'left-line' {
    // パターン12: 左縦中央にライン
    color: v.$color-primary;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1em;
    white-space: nowrap;
    &::after {
      content: '';
      height: 2px;
      width: 100%;
      display: block;
      background-color: color.adjust(
        v.$color-primary,
        $lightness: 25%
      ); // 少し明るい色
    }
  }
}
